

<h1>Beers</h1>

<!-- Fragmentticachays, kamat latautuu nopeammin 1. latauksen jälkeen. Sivun cachatty osa näytetään nyt kaikille samanlaisena.
Jos luomme nyt uuden oluen huomaamme, että uuden oluen tietoja ei tule sivulle. Syynä tälle on tietenkin se, että sivufragmentti löytyy edelleen välimuistista. Vanhentunut näkymäfragmentti tulisi siis ekspiroida. -->
<% cache "beerlist-#{@order}", skip_digest: true do %>

<table class="table table-hover">
  <thead>
    <tr>
      <th> <%= link_to 'Name', beers_path(order:"name") %> </th>
      <th> <%= link_to 'Style', beers_path(order:"style") %> </th>
      <th> <%= link_to 'Brewery', beers_path(order:"brewery") %> </th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @beers.each do |beer| %>
      <tr>
        <td><%= link_to beer.name, beer %></td>
        <td><%= link_to beer.style.beer_style, beer.style %></td>
        <td><%= link_to beer.brewery.name, beer.brewery %></td>
        <td><%= link_to 'Edit', edit_beer_path(beer), class: "btn btn-secondary btn-link btn-sm" %></td>
        <td><%= link_to 'Destroy', beer, class: 'btn btn-danger btn-link btn-sm', method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<% end %>
<!-- END Fragmentticachays -->

<br>
<%= link_to 'New Beer', new_beer_path if current_user %> |
<%= link_to 'Breweries', breweries_path %>
